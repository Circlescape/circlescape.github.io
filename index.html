<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>2D Multiplayer Base</title>
	<link rel="stylesheet" href="display.css" />
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
	<div id="ui-root">
		<div id="main-menu" class="panel">
			<h1>Circlescape</h1>
			<p class="subtitle">Minimal 2D Multiplayer Sandbox</p>
			<div class="menu-section">
				<label>Player Name</label>
				<input id="player-name" maxlength="16" placeholder="Player" />
			</div>
			<button id="btn-play">Play (Solo)</button>
			<button id="btn-mp">Multiplayer</button>
			<p class="hint">WASD to move • Mouse to aim • Esc to menu</p>
		</div>
		<div id="mp-menu" class="panel hidden">
			<h2>Multiplayer</h2>
			<p class="small steps"><strong>Ultra Simple:</strong> Host clicks Make Code and sends it. Joiner pastes that code (their reply auto-creates & copies). Host pastes each reply to connect. One copy each direction, no extra buttons.</p>
			<div class="mp-cols simple single-flow">
				<div class="mp-col host-side">
					<h3>Host</h3>
					<button id="btn-host">Make Code</button>
					<div id="host-section" class="hidden">
						<label>Host Code <span class="hint-inline" id="host-player-count"></span></label>
						<div class="code-row"><textarea id="host-offer" readonly class="code-box" aria-label="Host Code"></textarea><button class="copy-btn" data-copy="host-offer">Copy</button></div>
						<label>Player Reply Code (paste here)</label>
						<textarea id="host-answer" class="code-box small" placeholder="Paste reply code"></textarea>
						<div class="code-row mini"><button id="btn-apply-answer" class="apply-btn" style="width:auto;">Connect Player</button><span id="host-status" class="status small" style="flex:1; margin-top:0;"></span></div>
					</div>
				</div>
				<div class="mp-col join-side">
					<h3>Join</h3>
					<label>Paste Host Code</label>
					<textarea id="join-offer" class="code-box" placeholder="Paste host code"></textarea>
					<button id="btn-join-start" style="margin-top:10px;">Join</button>
					<label>Your Auto Reply (send to host)</label>
					<div class="code-row"><textarea id="join-answer" readonly class="code-box" aria-label="Reply Code"></textarea><button class="copy-btn" data-copy="join-answer">Copy</button></div>
					<button id="btn-join-enter" disabled>Enter World</button>
					<p id="join-status" class="status small"></p>
				</div>
			</div>
			<div class="actions"><button id="btn-back-menu" class="btn-secondary">Back</button></div>
		</div>
		<div id="hud" class="panel hidden">
			<div id="hud-name"></div>
		</div>
		<div id="death-screen" class="panel hidden" role="dialog" aria-modal="true" aria-labelledby="death-title">
			<h2 id="death-title">You Died</h2>
			<p class="subtitle" style="margin-top:0; margin-bottom:18px;">Fallen in the wilds.</p>
			<div class="actions" style="display:flex; gap:14px;">
				<button id="btn-respawn" style="margin-top:0;">Respawn</button>
				<button id="btn-leave" class="btn-secondary" style="margin-top:0;">Leave</button>
			</div>
		</div>
			<div id="res-panel" class="hidden">
				<div class="res-item" data-res="wood">
					<svg viewBox="0 0 32 32" class="icon"><path d="M14 2h4v6l5 5v8l-5 9h-4l5-9v-6l-5-5V2z" fill="#8b5a38"/><path d="M18 2h-4v6l-5 5v8l5 9h4l-5-9v-6l5-5V2z" fill="#a96d42"/></svg>
					<span class="count" id="res-wood">0</span>
				</div>
				<div class="res-item" data-res="stone">
					<svg viewBox="0 0 32 32" class="icon"><path d="M6 22 2 14l7-8 9-2 8 5 4 9-4 8-10 4z" fill="#7d858c"/><path d="M9 7 4 14l3 7 8 2 7-3 3-6-3-7-6-4z" fill="#a8b2b9"/></svg>
					<span class="count" id="res-stone">0</span>
				</div>
				<div class="res-item" data-res="food">
					<svg viewBox="0 0 32 32" class="icon"><circle cx="16" cy="18" r="10" fill="#ff6f4d"/><circle cx="13" cy="15" r="3" fill="#ffd7c9"/><path d="M16 8c2-4 6-5 9-5-2 3-2 6-1 8-3-1-6-1-8-3z" fill="#3d8a3d"/></svg>
					<span class="count" id="res-food">0</span>
				</div>
			</div>
			<button id="btn-settings" class="icon-btn floating-gear hidden" title="Settings" aria-label="Settings">
				<svg viewBox="0 0 24 24" class="gear" width="22" height="22" aria-hidden="true">
					<path fill="none" stroke="#cfd9e2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M12 9.5a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm8.5 2.5a6.5 6.5 0 0 0-.12-1.2l2.07-1.61-2-3.46-2.48.73a6.6 6.6 0 0 0-2.07-1.2L15.5 2h-4l-.4 2.26a6.6 6.6 0 0 0-2.07 1.2l-2.48-.73-2 3.46 2.07 1.6a6.5 6.5 0 0 0 0 2.4l-2.07 1.6 2 3.46 2.48-.73c.6.5 1.3.9 2.07 1.2l.4 2.28h4l.4-2.26c.77-.3 1.47-.7 2.07-1.2l2.48.73 2-3.46-2.07-1.61c.08-.39.12-.79.12-1.2Z" />
				</svg>
			</button>
			<div id="overlay" class="hidden" aria-hidden="true"></div>
			<div id="settings-modal" class="panel modal small hidden" role="dialog" aria-modal="true" aria-labelledby="settings-title">
				<h2 id="settings-title">Settings</h2>
				<div class="setting-row">
					<label for="opt-fps" class="switch">
						<input type="checkbox" id="opt-fps" />
						<span class="slider"></span>
						<span class="sw-label">Show FPS</span>
					</label>
				</div>
				<div class="setting-row inline">
					<button id="btn-close-settings" class="btn-secondary">Close</button>
				</div>
			</div>
	</div>
	<canvas id="game"></canvas>
	<script src="bundle.js"></script>
</body>
</html>
